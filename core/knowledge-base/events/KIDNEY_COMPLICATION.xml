<?xml version="1.0" encoding="UTF-8"?>
<event name="KIDNEY_COMPLICATION_EVENT">
    <categories>Complications</categories>
    <description>Dysglycemia event</description>
    <derived-from>
        <attribute name="KIDNEY_COMPLICATION" tak="raw-concept" idx="0" ref="A1"/>
        <attribute name="CREATININE_SERUM_MEASURE" tak="raw-concept" idx="0" ref="A2"/>
        <attribute name="E-GFR_MEASURE" tak="raw-concept" idx="0" ref="A3"/>
        <attribute name="CREATININE_RISE_SERUM_MEASURE" tak="parameterized-raw-concept" idx="0" ref="A4"/>
        <attribute name="CREATININE_REL_SERUM_MEASURE" tak="parameterized-raw-concept" idx="0" ref="A5"/>
    </derived-from>
    
    <!-- 
    Abstraction rules: constraint types allowed in <allowed-value>:
    - equal="value"               → exact match
    - min="value"                 → >= value
    - max="value"                 → <= value
    - min="val1" max="val2"       → range [val1, val2]
    -->
    <abstraction-rules>
        <rule value="True" operator="or">
            <attribute ref="A1">
                <allowed-value equal="True"/>  <!-- exact match -->
            </attribute>
            <attribute ref="A2">
                <allowed-value min="20"/> <!-- >= 20, probable AKI -->
            </attribute>
            <attribute ref="A3">
                <allowed-value max="29.99"/>  <!-- < 30 CKD Stage 4 -->
            </attribute>
            <attribute ref="A4">
                <allowed-value min="0.3"/>  <!-- >= 0.3 increase from baseline CREATININE -->
            </attribute>
            <attribute ref="A5">
                <allowed-value min="1.5"/>  <!-- >= 1.5 times from baseline CREATININE --> 
            </attribute>
        </rule>
    </abstraction-rules>
</event>