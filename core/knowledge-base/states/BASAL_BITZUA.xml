<?xml version="1.0" encoding="UTF-8"?>
<state name="BASAL_BITZUA_STATE">
    <categories>Medications</categories>
    <description>Abstraction for the dosage and route of administration of BASAL insulin</description>
    <derived-from name="BASAL_BITZUA" tak="raw-concept"/>

    <!-- Concatenate adjacent equal states within good_after window; allow 1 outlier skip -->
    <persistence good-after="24h" interpolate="true" max-skip="1"/>

    <!-- Discretize and abstract -->
    <abstraction-rules>
        <rule value="SubCutaneous Low" operator="and">
            <attribute idx="0">
                <allowed-value min="0" max="20"/>
            </attribute>
            <attribute idx="1">
                <allowed-value equal="SubCutaneous"/>
            </attribute>
        </rule>
        <rule value="IntraVenous Low" operator="and">
            <attribute idx="0">
                <allowed-value min="0" max="20"/>
            </attribute>
            <attribute idx="1">
                <allowed-value equal="IntraVenous"/>
            </attribute>
        </rule>
        <rule value="SubCutaneous Medium" operator="and">
            <attribute idx="0">
                <allowed-value min="20" max="40"/>
            </attribute>
            <attribute idx="1">
                <allowed-value equal="SubCutaneous"/>
            </attribute>
        </rule>
        <rule value="IntraVenous Medium" operator="and">
            <attribute idx="0">
                <allowed-value min="20" max="40"/>
            </attribute>
            <attribute idx="1">
                <allowed-value equal="IntraVenous"/>
            </attribute>
        </rule>
        <rule value="SubCutaneous High" operator="and">
            <attribute idx="0">
                <allowed-value min="40"/>
            </attribute>
            <attribute idx="1">
                <allowed-value equal="SubCutaneous"/>
            </attribute>
        </rule>
        <rule value="IntraVenous High" operator="and">
            <attribute idx="0">
                <allowed-value min="40"/>
            </attribute>
            <attribute idx="1">
                <allowed-value equal="IntraVenous"/>
            </attribute>
        </rule>
    </abstraction-rules>
</state>